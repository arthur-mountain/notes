# 二進制、八進制、十六進制的關係

各進位制都是用來簡化二進位數據表示的方法，每種系統都有固定的位元對應規則。

---

## 十六進位表示法

- **字符範圍**

  使用 `0-9` 與 `A-F` 共 16 個字符來表示數據。

- **位元對應**

  - 每個十六進位數字表示 4 個二進位位元(bits)

  - 兩個十六進位數字合在一起剛好代表 1 個位元組(8 bits)

- **常見前綴**

  通常以 `0x` 為前綴或 `h` 為後綴，例如: `0x1A` 或 `1Ah`

- **對照表**

  | 十六進位 | 二進位 |
  | -------- | ------ |
  | 0        | 0000   |
  | 1        | 0001   |
  | 2        | 0010   |
  | 3        | 0011   |
  | 4        | 0100   |
  | 5        | 0101   |
  | 6        | 0110   |
  | 7        | 0111   |
  | 8        | 1000   |
  | 9        | 1001   |
  | A        | 1010   |
  | B        | 1011   |
  | C        | 1100   |
  | D        | 1101   |
  | E        | 1110   |
  | F        | 1111   |

- **範例**

  - `0x1A`、`1Ah` → `0001 1010`

  - `0xFF`、`FFh` → `1111 1111`(等於十進位的 255)

---

## 八進位表示法

- **字符範圍**

  使用 `0-7` 共 8 個字符來表示數據。

- **位元對應**

  - 每個八進位數字表示 3 個二進位位元(bits)

  - 三個八進位數字可表示 9 個 bits

- **常見前綴**
  通常以 `0` 為前綴或 `o` 為後綴，例如: `012` 或 `12o`

- **對照表**

  | 八進位 | 二進位 |
  | ------ | ------ |
  | 0      | 000    |
  | 1      | 001    |
  | 2      | 010    |
  | 3      | 011    |
  | 4      | 100    |
  | 5      | 101    |
  | 6      | 110    |
  | 7      | 111    |

- **範例**

  - `012`、`12o` → `001 010`

  - `77`、`77o` → `111 111`(等於十進位 63)

---

## 總結規則

1. **十六進位**:

   - 每個字符 = 4 bits

   - 兩個字符 = 8 bits (1 byte)

2. **八進位**:

   - 每個字符 = 3 bits

   - 三個字符 = 9 bits

     - 注意: 9 bits 多於 1 byte (8 bits)，因此在轉換時需作處理

---

## 八進位轉換 9 bits 與 8 bits 的問題

### 問題描述

- **十六進位**: 2 個字符剛好代表 8 bits

- **八進位**: 2 個字符僅有 6 bits，無法完整表示 1 byte

- 通常用 **3 個八進位數字** 表示 9 bits

### 處理方式

1. **取低 8 bits**

   如果只需要 8 bits，可以用位移操作(例如 `377 >>> 1`)來捨棄最高的 1 bit

   - 例: `377` 的二進位表示 `011 111 111`

     - 右移 1 位 → `001 111 111`(即 `1111 1111`，十六進位為 `FF`)

2. **保留完整 9 bits**

   若必須保留所有 9 bits，則需拆分存儲:

   - **第一個位元組**: 存前 8 bits

   - **第二個位元組**: 存剩下的 1 bit，並用 7 個 0 補足

   範例:

   - 將 `011 111 111` 分成:

     - 第一個位元組: `1111 1111` (0xFF)

     - 第二個位元組: `0000 0000` (0x00)

### 空間浪費問題

- 使用 2 bytes (16 bits) 存儲 9 bits 會造成 7 bits 的浪費

- 解決方案包括:

  1. **位元壓縮 (Bit Packing)**

     - 多組 9 bits 數據連續存放，僅用所需的位元數，不是單獨分配每組 16 bits

  2. **位元域 (Bit Field)**

     - 在 C 語言等中，利用結構體定義精確的位元長度

  3. **根據需求選擇**

     - 若能接受精度降低，直接截取低 8 bits

     - 若空間允許，則使用 16 bits 存儲 9 bits

---

## 小結

- **十六進位**

  - 簡單且精確: 2 個字符 = 1 byte

- **八進位**

  - 表示上較複雜: 3 個字符 = 9 bits，需要根據情況取低 8 bits或利用位元壓縮來減少空間浪費
